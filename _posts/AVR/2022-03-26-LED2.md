---
layout: single
title: "[ATmega128]LED 교차 점등"
categories: ["AVR"]
tag: [ATmega128]
author_profile: true
sidebar_main: true
---

> **개요**

처음 LED 제어와 비슷하게 2개의 LED를 번갈아가며 ON. OFF 소스코드를 짜보려고 한다. 한 가지 다른 점이 있다면 포트를 16진수로 표현하지 않고 ```#define _BV(bit)```을 통해 코드를 작성해보았다.  

> **하드웨어 구성**



> **소스코드**

```cpp
#define F_CPU 16000000UL
#include <avr/io.h>
#include <util/delay.h>

#define greenLed 0x01
#define blueLed	0x02

int main(void)
{
	DDRB = (greenLed | blueLed);
	while (1)
	{
		PORTB |= greenLed;
		_delay_ms(500);
		PORTB |= blueLed;
		_delay_ms(500);
	}
}
```

> **소스코드 구성**

```cpp
#define greenLed 0x01
#define blueLed	0x02
```
코드를 직관적으로 볼 수 있도록 하기 위해 16진수로 표현하던 포트를 **#define**으로 선언했다. 이렇게 구현하면 함수명, 변수명을 통해서 보다 편리하게 수정할 수 있고 다른 사람이 이해하기도 편하다. 앞으로 여러 방법을 통해 포트를 지정해볼 것이다.

```cpp 
DDRB = (greenLed | blueLed); 
```
비트 연산자를 이용해  ```DDRB = (00000001 | 00000010)```   로 ```DDRB = 0b00000011``` 이 된다.

```cpp
	while (1)
	{
		PORTB = greenLed;
		_delay_ms(500);
		PORTB = blueLed;
		_delay_ms(500);
	}
```
이후  코딩 내용은 LED 점등과 동일하다.
